# æ‹çˆ±å¼€å§‹æ—¥æœŸåŠŸèƒ½æµ‹è¯•è¯´æ˜

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°
æƒ…ä¾£åŒ¹é…æˆåŠŸåï¼Œè‡ªåŠ¨è®¾ç½®æ‹çˆ±å¼€å§‹æ—¥æœŸä¸ºå½“å¤©ï¼Œç”¨æˆ·å¯ä»¥éšæ—¶ä¿®æ”¹æ‹çˆ±å¼€å§‹æ—¥æœŸï¼Œç³»ç»Ÿè‡ªåŠ¨è®¡ç®—æ‹çˆ±å¤©æ•°ã€æœˆæ•°ã€å¹´æ•°ã€‚

## ğŸ“‹ APIæ¥å£åˆ—è¡¨

### 1. è·å–æƒ…ä¾£æ‹çˆ±ä¿¡æ¯
```
GET /api/couples/{coupleId}/love-info
Authorization: Bearer {token}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "data": {
    "loveStartDate": "2024-01-01",
    "loveDays": 365,
    "loveMonths": 12,
    "loveYears": 1
  }
}
```

### 2. æ›´æ–°æ‹çˆ±å¼€å§‹æ—¥æœŸ
```
PUT /api/couples/{coupleId}/love-start-date
Authorization: Bearer {token}
Content-Type: application/json

{
  "loveStartDate": "2024-02-14"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "æ‹çˆ±å¼€å§‹æ—¥æœŸæ›´æ–°æˆåŠŸ",
  "data": {
    "loveStartDate": "2024-02-14",
    "loveDays": 320,
    "loveMonths": 10,
    "loveYears": 0
  }
}
```

### 3. è·å–å½“å‰ç”¨æˆ·çš„æ‹çˆ±ä¿¡æ¯
```
GET /api/couples/my/love-info
Authorization: Bearer {token}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "data": {
    "loveStartDate": "2024-01-01",
    "loveDays": 365,
    "loveMonths": 12,
    "loveYears": 1
  }
}
```

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æ³¨å†Œä¸¤ä¸ªç”¨æˆ·
```bash
# æ³¨å†Œç”¨æˆ·A
curl -X POST http://localhost:8080/api/users/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "userA",
    "password": "123456",
    "nickname": "ç”¨æˆ·A",
    "gender": "MALE"
  }'

# æ³¨å†Œç”¨æˆ·B
curl -X POST http://localhost:8080/api/users/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "userB",
    "password": "123456",
    "nickname": "ç”¨æˆ·B",
    "gender": "FEMALE"
  }'
```

### 2. ç™»å½•è·å–token
```bash
# ç”¨æˆ·Aç™»å½•
curl -X POST http://localhost:8080/api/users/login \
  -H "Content-Type: application/json" \
  -d '{
    "identifier": "userA",
    "password": "123456"
  }'
```

### 3. è·å–é‚€è¯·ç 
```bash
curl -X GET http://localhost:8080/api/users/1/invitation-code \
  -H "Authorization: Bearer {token}"
```

### 4. æƒ…ä¾£åŒ¹é…
```bash
# ç”¨æˆ·Bç™»å½•åï¼Œä½¿ç”¨ç”¨æˆ·Açš„é‚€è¯·ç åŒ¹é…
curl -X POST http://localhost:8080/api/users/match \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {userBçš„token}" \
  -d '{
    "invitationCode": "ABC123"
  }'
```

### 5. è·å–æ‹çˆ±ä¿¡æ¯
```bash
# è·å–æƒ…ä¾£çš„æ‹çˆ±ä¿¡æ¯
curl -X GET http://localhost:8080/api/couples/1/love-info \
  -H "Authorization: Bearer {token}"

# è·å–å½“å‰ç”¨æˆ·çš„æ‹çˆ±ä¿¡æ¯
curl -X GET http://localhost:8080/api/couples/my/love-info \
  -H "Authorization: Bearer {token}"
```

### 6. æ›´æ–°æ‹çˆ±å¼€å§‹æ—¥æœŸ
```bash
curl -X PUT http://localhost:8080/api/couples/1/love-start-date \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {token}" \
  -d '{
    "loveStartDate": "2024-02-14"
  }'
```

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. æ•°æ®æ¨¡å‹
```java
@Entity
public class Couple {
    private LocalDate loveStartDate;    // æ‹çˆ±å¼€å§‹æ—¥æœŸ
    private LocalDateTime matchDate;    // åŒ¹é…æ—¥æœŸ
}
```

### 2. é»˜è®¤å€¼è®¾ç½®
- åŒ¹é…æˆåŠŸæ—¶è‡ªåŠ¨è®¾ç½®`loveStartDate`ä¸ºå½“å¤©
- åŒ¹é…æˆåŠŸæ—¶è‡ªåŠ¨è®¾ç½®`matchDate`ä¸ºå½“å‰æ—¶é—´

### 3. æƒé™æ§åˆ¶
- åªæœ‰æƒ…ä¾£åŒæ–¹å¯ä»¥ä¿®æ”¹æ‹çˆ±å¼€å§‹æ—¥æœŸ
- é€šè¿‡JWT tokenéªŒè¯ç”¨æˆ·èº«ä»½

### 4. æ—¥æœŸéªŒè¯
- ä¸èƒ½æ˜¯æœªæ¥æ—¥æœŸ
- ä¸èƒ½è¶…è¿‡10å¹´å‰
- ä¸èƒ½ä¸ºç©º

### 5. è®¡ç®—é€»è¾‘
```java
// è®¡ç®—æ‹çˆ±å¤©æ•°
long days = ChronoUnit.DAYS.between(startDate, today);

// è®¡ç®—æ‹çˆ±æœˆæ•°
long months = ChronoUnit.MONTHS.between(startDate, today);

// è®¡ç®—æ‹çˆ±å¹´æ•°
long years = ChronoUnit.YEARS.between(startDate, today);
```

## ğŸ‰ åŠŸèƒ½ç‰¹è‰²

âœ… **è‡ªåŠ¨è®¾ç½®** - åŒ¹é…æ—¶è‡ªåŠ¨è®¾ç½®é»˜è®¤æ—¥æœŸ  
âœ… **çµæ´»ä¿®æ”¹** - ç”¨æˆ·å¯ä»¥éšæ—¶ä¿®æ”¹æ‹çˆ±å¼€å§‹æ—¥æœŸ  
âœ… **å®æ—¶è®¡ç®—** - è‡ªåŠ¨è®¡ç®—æ‹çˆ±å¤©æ•°ã€æœˆæ•°ã€å¹´æ•°  
âœ… **æƒé™æ§åˆ¶** - åªæœ‰æƒ…ä¾£åŒæ–¹å¯ä»¥ä¿®æ”¹  
âœ… **æ•°æ®éªŒè¯** - å®Œå–„çš„æ—¥æœŸéªŒè¯é€»è¾‘  

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“è¿ç§»** - éœ€è¦æ›´æ–°æ•°æ®åº“è¡¨ç»“æ„
2. **é»˜è®¤å¤´åƒ** - éœ€è¦æ·»åŠ çœŸå®çš„é»˜è®¤å¤´åƒæ–‡ä»¶
3. **æ—¥æœŸæ ¼å¼** - ä½¿ç”¨ISOæ—¥æœŸæ ¼å¼ï¼ˆYYYY-MM-DDï¼‰
4. **æ—¶åŒºå¤„ç†** - ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ—¶åŒº

ç°åœ¨å¯ä»¥å¼€å§‹æµ‹è¯•æ‹çˆ±å¼€å§‹æ—¥æœŸåŠŸèƒ½äº†ï¼ ğŸš€ 